# Ghoona Camp - API Design

## Overview
Ghoona Campã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®RESTful APIè¨­è¨ˆæ›¸ã§ã™ã€‚
FastAPI + PostgreSQL ã‚’ä½¿ç”¨ã—ã€èªè¨¼ã«ã¯ JWT (RS256) + Cookie-based èªè¨¼ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: FastAPI
- **èªè¨¼**: JWT (RS256) + httpOnly Cookie
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: Swagger UI (`/docs`)

## Base URL
```
é–‹ç™ºç’°å¢ƒ: http://localhost:8000/api/v1
æœ¬ç•ªç’°å¢ƒ: https://api.ghoona-camp.com/v1
```

## Authentication
Cookie-based JWTèªè¨¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
- ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸæ™‚ã€JWTãƒˆãƒ¼ã‚¯ãƒ³ãŒ `httpOnly` Cookie ã¨ã—ã¦è¨­å®šã•ã‚Œã¾ã™
- ä»¥é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã¯ Cookie ãŒè‡ªå‹•çš„ã«é€ä¿¡ã•ã‚Œã¾ã™
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã¯ `withCredentials: true` ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™

```
Cookie: access_token=<jwt_token>
```

## API Endpoints

### Authentication
èªè¨¼é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| POST | `/auth/register` | æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² | âŒ | ğŸŒ |
| POST | `/auth/login` | ãƒ­ã‚°ã‚¤ãƒ³ã€‚æˆåŠŸæ™‚ã«JWT Cookieã‚’è¨­å®š | âŒ | ğŸŒ |
| POST | `/auth/logout` | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€‚JWT Cookieã‚’å‰Šé™¤ | âŒ | ğŸ” |
| GET | `/auth/me` | ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾— | âŒ | ğŸ” |

#### POST /auth/register Request Body
```json
{
  "email": "user@example.com",
  "password": "securePassword123",
  "username": "username"
}
```

#### POST /auth/login Request Body
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

#### POST /auth/login Response
```json
{
  "message": "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ",
  "user_id": "550e8400-e29b-41d4-a716-446655440000"
}
```
â€» `access_token` ã¯ httpOnly Cookie ã¨ã—ã¦è¨­å®šã•ã‚Œã‚‹ãŸã‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã«ã¯å«ã‚ãªã„

#### GET /auth/me Response
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "avatar_url": null,
  "discord_id": null,
  "is_active": true
}
```

**å®Ÿè£…æ™‚ã®å¤‰æ›´ç‚¹ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã®ä¿®æ­£ï¼‰:**
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã® `backend/app/presentation/api/auth_api.py` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿè£… | Ghoona Camp è¦ä»¶ |
|-----------------|------------------|
| `login_id` ã§ãƒ­ã‚°ã‚¤ãƒ³ | `email` ã§ãƒ­ã‚°ã‚¤ãƒ³ |
| `GET /auth/status` | `GET /auth/me`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¿”ã™ï¼‰ |
| `user_id: int` | `user_id: UUID` |
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« `access_token` å«ã‚€ | Cookie ã®ã¿ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã‚ãªã„ï¼‰ |
| - | `POST /auth/register` è¿½åŠ  |

### User Management
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/users` | å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€è¦§ã‚’å–å¾—ã€‚ãƒ¡ãƒ³ãƒãƒ¼æ¤œç´¢ | âœ… | ğŸ” |
| GET | `/users/skills` | ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ«ä¸€è¦§ã‚’å–å¾—ã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é¸æŠè‚¢ã§ä½¿ç”¨ | âŒ | ğŸ” |
| GET | `/users/interests` | ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹èˆˆå‘³ãƒ»é–¢å¿ƒä¸€è¦§ã‚’å–å¾—ã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é¸æŠè‚¢ã§ä½¿ç”¨ | âŒ | ğŸ” |
| GET | `/users/{userId}` | æŒ‡å®šã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã€‚ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»SNSãƒªãƒ³ã‚¯æƒ…å ±ã‚’å«ã‚€ | âŒ | ğŸ” |
| PUT | `/users/{userId}` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŸºæœ¬æƒ…å ±ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»SNSãƒªãƒ³ã‚¯ã‚’æ›´æ–°ã€‚ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šã§ä½¿ç”¨ | âŒ | ğŸ‘¤ |
| GET | `/users/{userId}/rivals` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šã—ãŸãƒ©ã‚¤ãƒãƒ«ä¸€è¦§ã‚’å–å¾—ï¼ˆæœ€å¤§3äººï¼‰ | âŒ | ğŸ‘¤ |
| POST | `/users/{userId}/rivals` | æ–°ã—ã„ãƒ©ã‚¤ãƒãƒ«ã‚’è¿½åŠ ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®æ¯”è¼ƒè¡¨ç¤ºã§ä½¿ç”¨ | âŒ | ğŸ‘¤ |
| DELETE | `/users/{userId}/rivals/{rivalId}` | ãƒ©ã‚¤ãƒãƒ«é–¢ä¿‚ã‚’è§£é™¤ | âŒ | ğŸ‘¤ |

#### GET /users ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `search` (string): ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆdisplayName, taglineã‚’å¯¾è±¡ï¼‰
- `skills` (string): ã‚¹ã‚­ãƒ«ã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯ã€ORæ¤œç´¢ï¼‰
- `interests` (string): èˆˆå‘³ãƒ»é–¢å¿ƒã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯ã€ORæ¤œç´¢ï¼‰
- `title_levels` (string): ç§°å·ãƒ¬ãƒ™ãƒ«ã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯ã€1-8ï¼‰
- `limit` (number): å–å¾—ä»¶æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20, æœ€å¤§: 100ï¼‰
- `offset` (number): ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

**ä¾‹:** `GET /users?search=ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢&skills=TypeScript,React&limit=20&offset=0`


### Goal Management
ç›®æ¨™è¨­å®šãƒ»ç®¡ç†é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/goals/me` | è‡ªåˆ†ã®ç›®æ¨™ä¸€è¦§ã‚’å–å¾—ã€‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ»ãƒ‘ãƒ–ãƒªãƒƒã‚¯ä¸¡æ–¹ã‚’å«ã‚€ | âœ… | ğŸ‘¤ |
| GET | `/goals/public` | å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¬é–‹ç›®æ¨™ä¸€è¦§ã‚’å–å¾—ã€‚ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›®æ¨™é–²è¦§ã§ä½¿ç”¨ | âœ… | ğŸ” |
| POST | `/goals` | æ–°ã—ã„ç›®æ¨™ã‚’ä½œæˆã€‚ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæœ€å¤§200æ–‡å­—ï¼‰ã€èª¬æ˜ã€æœŸé–“ã€å…¬é–‹è¨­å®šã‚’æŒ‡å®š | âŒ | ğŸ‘¤ |
| PUT | `/goals/{goalId}` | ç›®æ¨™ã®å†…å®¹ã‚’æ›´æ–°ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜ã€æœŸé–“ã€å…¬é–‹è¨­å®šç­‰ï¼‰ | âŒ | ğŸ‘¤ |
| DELETE | `/goals/{goalId}` | ç›®æ¨™ã‚’å‰Šé™¤ã€‚é”æˆæ¸ˆã¿ã¾ãŸã¯ä¸è¦ã«ãªã£ãŸç›®æ¨™ã®å‰Šé™¤ã§ä½¿ç”¨ | âŒ | ğŸ‘¤ |

#### GET /goals/me ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `year` (number, å¿…é ˆ): è¡¨ç¤ºå¯¾è±¡ã®å¹´ï¼ˆä¾‹: 2025ï¼‰
- `month` (number, å¿…é ˆ): è¡¨ç¤ºå¯¾è±¡ã®æœˆï¼ˆ1-12ï¼‰
- `is_public` (boolean): å…¬é–‹è¨­å®šã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆtrue=å…¬é–‹ã®ã¿, false=ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã®ã¿, çœç•¥=å…¨ã¦ï¼‰

**ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯:**
æŒ‡å®šæœˆã«ã€Œã‹ã‹ã‚‹ã€ç›®æ¨™ã‚’è¿”ã™:
- é–‹å§‹æ—¥ãŒæœˆæœ«ä»¥å‰ AND (çµ‚äº†æ—¥ãŒæœˆåˆä»¥é™ OR çµ‚äº†æ—¥ãŒnull)

**ä¾‹:** `GET /goals/me?year=2025&month=1` - 2025å¹´1æœˆã«è¡¨ç¤ºã•ã‚Œã‚‹è‡ªåˆ†ã®ç›®æ¨™

#### GET /goals/public ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `year` (number, å¿…é ˆ): è¡¨ç¤ºå¯¾è±¡ã®å¹´ï¼ˆä¾‹: 2025ï¼‰
- `month` (number, å¿…é ˆ): è¡¨ç¤ºå¯¾è±¡ã®æœˆï¼ˆ1-12ï¼‰
- `user_id` (string): ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

**ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯:**
æŒ‡å®šæœˆã«ã€Œã‹ã‹ã‚‹ã€å…¬é–‹ç›®æ¨™ã‚’è¿”ã™:
- é–‹å§‹æ—¥ãŒæœˆæœ«ä»¥å‰ AND (çµ‚äº†æ—¥ãŒæœˆåˆä»¥é™ OR çµ‚äº†æ—¥ãŒnull)

**ä¾‹:** `GET /goals/public?year=2025&month=1` - 2025å¹´1æœˆã«è¡¨ç¤ºã•ã‚Œã‚‹å…¬é–‹ç›®æ¨™

### Event Management
æœæ´»ã‚¤ãƒ™ãƒ³ãƒˆãƒ»å‚åŠ è€…ç®¡ç†é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/events` | é–‹å‚¬äºˆå®šãƒ»é–‹å‚¬ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—ã€‚æ—¥æ™‚é †ã§ã‚½ãƒ¼ãƒˆ | âœ… | ğŸ” |
| POST | `/events` | æ–°ã—ã„æœæ´»ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œæˆã€‚ã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜ã€æ—¥æ™‚ã€æœ€å¤§å‚åŠ è€…æ•°ç­‰ã‚’è¨­å®š | âŒ | ğŸ” |
| GET | `/events/{eventId}` | æŒ‡å®šã‚¤ãƒ™ãƒ³ãƒˆã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã€‚å‚åŠ è€…ä¸€è¦§ã€èª¬æ˜ã€Discordæƒ…å ±ç­‰ | âŒ | ğŸ” |
| PUT | `/events/{eventId}` | ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’æ›´æ–°ã€‚ä½œæˆè€…ã®ã¿ãŒå®Ÿè¡Œå¯èƒ½ | âŒ | ğŸ‘‘ |
| DELETE | `/events/{eventId}` | ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤ã€‚ä½œæˆè€…ã®ã¿ãŒå®Ÿè¡Œå¯èƒ½ | âŒ | ğŸ‘‘ |
| POST | `/events/{eventId}/participants` | ã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ ç”³è¾¼ã‚’è¡Œã†ã€‚å®šå“¡ãƒã‚§ãƒƒã‚¯ã‚‚å®Ÿè¡Œ | âŒ | ğŸ” |
| PUT | `/events/{eventId}/participants/{userId}` | å‚åŠ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ï¼ˆå‚åŠ â†’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç­‰ï¼‰ | âŒ | ğŸ‘¤ |

#### GET /events ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `status` (string): ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆupcoming, ongoing, pastï¼‰
- `creator` (string): ä½œæˆè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- `date_from` (string): é–‹å§‹æ—¥æ™‚ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆISO 8601å½¢å¼ï¼‰
- `date_to` (string): çµ‚äº†æ—¥æ™‚ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆISO 8601å½¢å¼ï¼‰
- `limit` (number): å–å¾—ä»¶æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20, æœ€å¤§: 100ï¼‰
- `offset` (number): ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

**ä¾‹:** `GET /events?status=upcoming&date_from=2025-01-20T00:00:00Z&limit=20&offset=0`

### Title Management
ç§°å·ãƒ»ãƒãƒƒã‚¸ç®¡ç†é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/titles` | å…¨ç§°å·ï¼ˆ8æ®µéšï¼‰ã®ä¸€è¦§ã‚’å–å¾—ã€‚ãƒ¬ãƒ™ãƒ«ã€å¿…è¦æ—¥æ•°ã€èª¬æ˜ã€ç”»åƒç­‰ã‚’å«ã‚€ | âŒ | ğŸ” |
| GET | `/titles/{titleId}` | æŒ‡å®šç§°å·ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã€‚ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã€ç²å¾—æ¡ä»¶ã€ä¿æŒè€…æ•°ç­‰ | âŒ | ğŸ” |
| GET | `/users/{userId}/achievements` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç§°å·å–å¾—å±¥æ­´ãƒ»ç¾åœ¨è¨­å®šä¸­ã®ç§°å·ã‚’å–å¾— | âŒ | ğŸ” |
| PUT | `/users/{userId}/achievements/{titleId}` | ç¾åœ¨è¡¨ç¤ºã™ã‚‹ç§°å·ã‚’å¤‰æ›´ã€‚ç²å¾—æ¸ˆã¿ç§°å·ã‹ã‚‰é¸æŠ | âŒ | ğŸ‘¤ |

### Attendance Management
Discordå‚åŠ è¨˜éŒ²ãƒ»çµ±è¨ˆç®¡ç†é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/users/{userId}/attendance/summaries` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ—¥æ¬¡å‚åŠ ã‚µãƒãƒªãƒ¼ã‚’å–å¾—ã€‚ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºã§ä½¿ç”¨ | âœ… | ğŸ‘¤ |
| GET | `/users/{userId}/attendance/statistics` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‚åŠ çµ±è¨ˆï¼ˆç·æ—¥æ•°ã€é€£ç¶šæ—¥æ•°ã€ç§°å·é€²æ—ç­‰ï¼‰ã‚’å–å¾— | âŒ | ğŸ” |
| GET | `/ranking/monthly` | å½“æœˆã®å‚åŠ æ—¥æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å–å¾—ã€‚ãƒ©ã‚¤ãƒãƒ«è¡¨ç¤ºã‚‚å«ã‚€ | âœ… | ğŸ” |
| GET | `/ranking/total` | ç·åˆå‚åŠ æ—¥æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å–å¾—ã€‚æ­´ä»£é †ä½è¡¨ç¤º | âœ… | ğŸ” |
| GET | `/ranking/streak` | é€£ç¶šå‚åŠ æ—¥æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å–å¾—ã€‚ç¾åœ¨ã®é€£ç¶šè¨˜éŒ²ã§é †ä½ä»˜ã‘ | âœ… | ğŸ” |

#### GET /users/{userId}/attendance/summaries ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `date_from` (string): é–‹å§‹æ—¥ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
- `date_to` (string): çµ‚äº†æ—¥ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰

**ä¾‹:** `GET /users/123/attendance/summaries?date_from=2025-01-01&date_to=2025-01-31`

#### GET /ranking/monthly ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `month` (number): æœˆã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆ1-12, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ç¾åœ¨æœˆï¼‰
- `limit` (number): å–å¾—ä»¶æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 50, æœ€å¤§: 100ï¼‰
- `offset` (number): ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

**ä¾‹:** `GET /ranking/monthly?month=2&limit=20&offset=0`

#### GET /ranking/total ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `limit` (number): å–å¾—ä»¶æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 50, æœ€å¤§: 100ï¼‰
- `offset` (number): ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

**ä¾‹:** `GET /ranking/total?limit=20&offset=0`

#### GET /ranking/streak ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `limit` (number): å–å¾—ä»¶æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 50, æœ€å¤§: 100ï¼‰
- `offset` (number): ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

**ä¾‹:** `GET /ranking/streak?limit=20&offset=0`

### Notification Management
é€šçŸ¥ãƒ»ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ç®¡ç†é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/users/{userId}/notifications` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é€šçŸ¥ä¸€è¦§ã‚’å–å¾—ã€‚ç§°å·ç²å¾—ã€ãƒ©ã‚¤ãƒãƒ«æ›´æ–°ã€ã‚¤ãƒ™ãƒ³ãƒˆç­‰ | âœ… | ğŸ‘¤ |
| PUT | `/notifications/{notificationId}` | é€šçŸ¥ã®æ—¢èª­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–° | âŒ | ğŸ‘¤ |
| DELETE | `/notifications/{notificationId}` | ä¸è¦ãªé€šçŸ¥ã‚’å‰Šé™¤ | âŒ | ğŸ‘¤ |
| GET | `/users/{userId}/notification-settings` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é€šçŸ¥è¨­å®šã‚’å–å¾—ã€‚å„ç¨®é€šçŸ¥ã®ON/OFFã€æ™‚åˆ»è¨­å®šç­‰ | âŒ | ğŸ‘¤ |
| PUT | `/users/{userId}/notification-settings` | é€šçŸ¥è¨­å®šã‚’æ›´æ–°ã€‚ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ™‚åˆ»ã€é€šçŸ¥ç¨®åˆ¥ã®æœ‰åŠ¹/ç„¡åŠ¹ç­‰ | âŒ | ğŸ‘¤ |

#### GET /users/{userId}/notifications ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `type` (string): é€šçŸ¥ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆachievement, event, rival, reminderï¼‰
- `read` (boolean): æ—¢èª­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆtrue, falseï¼‰
- `limit` (number): å–å¾—ä»¶æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20, æœ€å¤§: 100ï¼‰
- `offset` (number): ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

**ä¾‹:** `GET /users/123/notifications?type=achievement&read=false&limit=10&offset=0`

### System API
ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ãƒ»ç›£è¦–é–¢é€£ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| Method | Endpoint | Description | Query Params | Access |
|--------|----------|-------------|--------------|---------|
| GET | `/health` | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã€‚ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ã€DBæ¥ç¶šç¢ºèª | âŒ | ğŸŒ |


## Response Format

### Success Response
```json
{
  "data": {
    "goals": [...],
    "pagination": {
      "total": 127,
      "limit": 20,
      "offset": 0,
      "has_more": true
    }
  },
  "message": "success",
  "timestamp": "2025-01-21T10:00:00+00:00"
}
```

### Success Response (Single Resource)
```json
{
  "data": {
    "goal": {...}
  },
  "message": "success",
  "timestamp": "2025-01-21T10:00:00+00:00"
}
```

### Error Response
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid request parameters",
  },
  "timestamp": "2025-01-21T10:00:00+00:00"
}
```

## HTTP Status Codes

| Code | Description |
|------|-------------|
| 200 | OK - ãƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸ |
| 201 | Created - ãƒªã‚½ãƒ¼ã‚¹ä½œæˆæˆåŠŸ |
| 204 | No Content - å‰Šé™¤æˆåŠŸ |
| 400 | Bad Request - ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ |
| 401 | Unauthorized - èªè¨¼ã‚¨ãƒ©ãƒ¼ |
| 403 | Forbidden | ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚¨ãƒ©ãƒ¼ |
| 404 | Not Found - ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„ |
| 409 | Conflict - ãƒ‡ãƒ¼ã‚¿ç«¶åˆ |
| 422 | Unprocessable Entity - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ |
| 500 | Internal Server Error - ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ |

## Access Control

### ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®èª¬æ˜
- **ğŸŒ å…¬é–‹**: èªè¨¼ä¸è¦
- **ğŸ” èªè¨¼æ¸ˆã¿**: JWTèªè¨¼ï¼ˆCookieï¼‰ãŒå¿…è¦
- **ğŸ‘¤ æœ¬äººã®ã¿**: è‡ªåˆ†ã®ãƒªã‚½ãƒ¼ã‚¹ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **ğŸ‘‘ ä½œæˆè€…ã®ã¿**: ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆè€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **ğŸ¤– Botèªè¨¼**: Discord Botå°‚ç”¨ã®èªè¨¼
- **ğŸ“– å…¬é–‹è¨­å®š**: is_publicãƒ•ãƒ©ã‚°ã§åˆ¶å¾¡
- **ğŸ‘¤ğŸ“– æœ¬äººã¾ãŸã¯å…¬é–‹**: æœ¬äººã®ãƒªã‚½ãƒ¼ã‚¹ã‹ã€is_publicãŒtrueã®å ´åˆ

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼åˆ¶å¾¡
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯æœ¬äººã®ã¿ç·¨é›†å¯èƒ½
- ç›®æ¨™ã¯is_publicãƒ•ãƒ©ã‚°ã§å…¬é–‹åˆ¶å¾¡
- ãƒ“ã‚¸ãƒ§ãƒ³ã¯vision_publicãƒ•ãƒ©ã‚°ã§å…¬é–‹åˆ¶å¾¡
- å‚åŠ çµ±è¨ˆã¯æœ¬äººã®ã¿è©³ç´°é–²è¦§å¯èƒ½